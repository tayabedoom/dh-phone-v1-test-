<!DOCTYPE html>
<html lang="en" dir="ltr" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-en="Featured Products | DH Phone" data-fr="Produits Vedettes | DH Phone" data-ar="المنتجات المميزة | DH Phone">Featured Products | DH Phone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase Configuration -->
    <script src="config.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                        },
                        secondary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.4s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .product-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .dark .product-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.25), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
        }
        .product-image {
            transition: transform 0.5s ease;
        }
        .product-card:hover .product-image {
            transform: scale(1.05);
        }
        .btn-primary {
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            box-shadow: 0 4px 6px rgba(79, 70, 229, 0.2);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(79, 70, 229, 0.3);
        }
        .header-glass {
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        .nav-link {
            position: relative;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #4f46e5;
            transition: width 0.3s ease;
        }
        .dark .nav-link::after {
            background-color: #818cf8;
        }
        .nav-link:hover::after {
            width: 100%;
        }
        .active::after {
            width: 100%;
        }
        .price-tag {
            color: #4f46e5;
            font-weight: 700;
            font-size: 1.5rem;
        }
        .dark .price-tag {
            color: #818cf8;
        }
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .dark .skeleton {
            background: linear-gradient(90deg, #2d3748 25%, #4a5568 50%, #2d3748 75%);
            background-size: 200% 100%;
        }
        .filter-section {
            transition: all 0.3s ease;
        }
        .search-bar {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .dark .search-bar {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.2);
        }
        .filter-btn {
            transition: all 0.2s ease;
        }
        .filter-btn:hover {
            background-color: #e0e7ff;
        }
        .dark .filter-btn:hover {
            background-color: #3730a3;
        }
        .category-slider {
            display: flex;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .category-slider::-webkit-scrollbar {
            display: none;
        }
        .category-item {
            flex: 0 0 auto;
            white-space: nowrap;
        }
        .category-item.active {
            border-color: #4f46e5;
            color: #4f46e5;
            font-weight: 600;
        }
        .dark .category-item.active {
            border-color: #818cf8;
            color: #818cf8;
        }
        /* RTL specific styles */
        [dir="rtl"] .ml-10 {
            margin-right: 2.5rem;
            margin-left: 0;
        }
        [dir="rtl"] .mr-3 {
            margin-left: 0.75rem;
            margin-right: 0;
        }
        [dir="rtl"] .ml-1 {
            margin-right: 0.25rem;
            margin-left: 0;
        }
        [dir="rtl"] .space-x-8 > :not([hidden]) ~ :not([hidden]) {
            --tw-space-x-reverse: 1;
        }
        [dir="rtl"] .space-x-4 > :not([hidden]) ~ :not([hidden]) {
            --tw-space-x-reverse: 1;
        }
        [dir="rtl"] .space-x-3 > :not([hidden]) ~ :not([hidden]) {
            --tw-space-x-reverse: 1;
        }
        [dir="rtl"] .left-4 {
            left: auto;
            right: 1rem;
        }
        [dir="rtl"] .left-0 {
            left: auto;
            right: 0;
        }
        [dir="rtl"] .right-0 {
            right: auto;
            left: 0;
        }
        [dir="rtl"] .text-left {
            text-align: right;
        }
        [dir="rtl"] .transform {
            transform-style: preserve-3d;
        }
        [dir="rtl"] .hover\:translate-x-1:hover {
            --tw-translate-x: -0.25rem;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 dark:bg-slate-900 dark:text-gray-200 transition-colors duration-300 font-sans">
    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/80 dark:bg-slate-800/80 header-glass shadow-sm">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-12 md:h-16 items-center">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center">
                    <a href="index.html" class="flex items-center space-x-2">
                        <div class="w-8 h-8 md:w-10 md:h-10 rounded-full bg-blue-600 flex items-center justify-center shadow-lg">
                            <span class="text-white font-bold text-lg md:text-xl">DH</span>
                        </div>
                        <span class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-blue-600 bg-clip-text text-transparent">Phone</span>
                    </a>
                </div>
                <!-- Desktop Navigation -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-center space-x-8">
                        <a href="index.html" class="text-gray-600 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400 px-1 py-2 text-sm font-medium transition-colors nav-link" data-en="Home" data-fr="Accueil" data-ar="الصفحة الرئيسية">Home</a>
                        <a href="landing-page.html" class="text-primary-600 dark:text-primary-400 px-1 py-2 text-sm font-medium transition-colors nav-link active" data-en="Featured" data-fr="Vedettes" data-ar="المميزة">Featured</a>
                        <a href="Contact.html" class="text-gray-600 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400 px-1 py-2 text-sm font-medium transition-colors nav-link" data-en="Contact" data-fr="Contact" data-ar="اتصل بنا">Contact</a>
                        <!-- Language Selector -->
                        <div class="relative">
                            <button id="language-toggle" class="flex items-center text-gray-600 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400">
                                <span class="text-sm font-medium" data-en="EN" data-fr="FR" data-ar="AR">EN</span>
                                <i class="fas fa-chevron-down ml-1 text-xs"></i>
                            </button>
                            <div id="language-dropdown" class="hidden absolute right-0 mt-2 w-24 bg-white dark:bg-slate-700 rounded-lg shadow-lg py-1 z-10 border border-gray-200 dark:border-slate-600">
                                <button data-lang="en" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-600 w-full text-left transition-colors lang-option">English</button>
                                <button data-lang="fr" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-600 w-full text-left transition-colors lang-option">Français</button>
                                <button data-lang="ar" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-600 w-full text-left transition-colors lang-option" dir="rtl">العربية</button>
                            </div>
                        </div>
                        <!-- Dark Mode Toggle -->
                        <button id="theme-toggle" class="text-gray-600 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-moon dark:hidden"></i>
                            <i class="fas fa-sun hidden dark:block"></i>
                        </button>
                    </div>
                </div>
                <!-- Mobile menu button -->
                <div class="md:hidden flex items-center space-x-3">
                    <button id="theme-toggle-mobile" class="text-gray-600 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block"></i>
                    </button>
                    <button id="mobile-menu-button" class="text-gray-600 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            <!-- Mobile menu -->
            <div id="mobile-menu" class="hidden md:hidden pb-4 space-y-2">
                <a href="index.html" class="block px-3 py-2 text-base font-medium text-gray-600 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400 rounded-lg transition-colors" data-en="Home" data-fr="Accueil" data-ar="الصفحة الرئيسية">Home</a>
                <a href="landing-page.html" class="block px-3 py-2 text-base font-medium text-primary-600 dark:text-primary-400 rounded-lg transition-colors" data-en="Featured" data-fr="Vedettes" data-ar="المميزة">Featured</a>
                <a href="Contact.html" class="block px-3 py-2 text-base font-medium text-gray-600 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400 rounded-lg transition-colors" data-en="Contact" data-fr="Contact" data-ar="اتصل بنا">Contact</a>
                <div class="flex items-center px-3 py-2 space-x-4">
                    <!-- Language Selector Mobile -->
                    <div class="relative">
                        <button id="language-toggle-mobile" class="flex items-center text-gray-600 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400">
                            <span class="text-sm font-medium" data-en="EN" data-fr="FR" data-ar="AR">EN</span>
                            <i class="fas fa-chevron-down ml-1 text-xs"></i>
                        </button>
                        <div id="language-dropdown-mobile" class="hidden absolute left-0 mt-2 w-24 bg-white dark:bg-slate-700 rounded-lg shadow-lg py-1 z-10 border border-gray-200 dark:border-slate-600">
                            <button data-lang="en" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-600 w-full text-left transition-colors lang-option">English</button>
                            <button data-lang="fr" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-600 w-full text-left transition-colors lang-option">Français</button>
                            <button data-lang="ar" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-600 w-full text-left transition-colors lang-option" dir="rtl">العربية</button>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-12">
        <!-- Page Title -->
        <section class="text-center mb-4 md:mb-8 animate-fade-in">
            <h1 class="text-2xl md:text-4xl lg:text-5xl font-bold mb-3 md:mb-6 bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent" data-en="Featured Products" data-fr="Produits Vedettes" data-ar="المنتجات المميزة">Featured Products</h1>
            <p class="text-sm md:text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto" data-en="Discover our featured collection of high-quality tech products" data-fr="Découvrez notre collection vedette de produits technologiques de haute qualité" data-ar="اكتشف مجموعتنا المميزة من منتجات التكنولوجيا عالية الجودة">Discover our featured collection of high-quality tech products</p>
        </section>
        <!-- Search and Category Filters -->
        <div class="mb-6 md:mb-12">
            <!-- Search Bar -->
            <div class="mb-4 md:mb-6">
                <div class="relative search-bar">
                    <input 
                        type="text" 
                        id="search-input"
                        placeholder="Search products..." 
                        class="w-full p-3 md:p-4 pl-12 rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                    >
                </div>
            </div>

        </div>
        <!-- Product Grid -->
        <div class="flex-1">
            <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-8">
                <!-- Skeleton Loaders -->
                <div class="product-card bg-white dark:bg-slate-800 rounded-xl overflow-hidden shadow-lg">
                    <div class="h-40 md:h-48 skeleton"></div>
                    <div class="p-4 md:p-6">
                        <div class="h-5 md:h-6 skeleton rounded mb-3 md:mb-4"></div>
                        <div class="h-3 md:h-4 skeleton rounded mb-3 md:mb-6 w-3/4"></div>
                        <div class="flex justify-between items-center">
                            <div class="h-5 md:h-6 skeleton rounded w-1/3"></div>
                            <div class="h-8 md:h-10 skeleton rounded w-1/3"></div>
                        </div>
                    </div>
                </div>
                <div class="product-card bg-white dark:bg-slate-800 rounded-xl overflow-hidden shadow-lg">
                    <div class="h-40 md:h-48 skeleton"></div>
                    <div class="p-4 md:p-6">
                        <div class="h-5 md:h-6 skeleton rounded mb-3 md:mb-4"></div>
                        <div class="h-3 md:h-4 skeleton rounded mb-3 md:mb-6 w-3/4"></div>
                        <div class="flex justify-between items-center">
                            <div class="h-5 md:h-6 skeleton rounded w-1/3"></div>
                            <div class="h-8 md:h-10 skeleton rounded w-1/3"></div>
                        </div>
                    </div>
                </div>
                <div class="product-card bg-white dark:bg-slate-800 rounded-xl overflow-hidden shadow-lg">
                    <div class="h-40 md:h-48 skeleton"></div>
                    <div class="p-4 md:p-6">
                        <div class="h-5 md:h-6 skeleton rounded mb-3 md:mb-4"></div>
                        <div class="h-3 md:h-4 skeleton rounded mb-3 md:mb-6 w-3/4"></div>
                        <div class="flex justify-between items-center">
                            <div class="h-5 md:h-6 skeleton rounded w-1/3"></div>
                            <div class="h-8 md:h-10 skeleton rounded w-1/3"></div>
                        </div>
                    </div>
                </div>
                <div class="product-card bg-white dark:bg-slate-800 rounded-xl overflow-hidden shadow-lg">
                    <div class="h-40 md:h-48 skeleton"></div>
                    <div class="p-4 md:p-6">
                        <div class="h-5 md:h-6 skeleton rounded mb-3 md:mb-4"></div>
                        <div class="h-3 md:h-4 skeleton rounded mb-3 md:mb-6 w-3/4"></div>
                        <div class="flex justify-between items-center">
                            <div class="h-5 md:h-6 skeleton rounded w-1/3"></div>
                            <div class="h-8 md:h-10 skeleton rounded w-1/3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- Footer -->
    <footer class="bg-gray-900 text-white mt-8 md:mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 md:gap-8">
                <!-- Company Info -->
                <div class="col-span-1 md:col-span-2">
                    <h3 class="text-lg md:text-xl font-bold mb-3 md:mb-4">🛍️ DH Phone</h3>
                    <p class="text-sm md:text-base text-gray-300 mb-3 md:mb-4">Your trusted partner for all your phone needs. Quality products, excellent service, and unbeatable prices.</p>
                    <div class="flex space-x-3 md:space-x-4">
                        <!-- Facebook Icon -->
                        <a href="https://www.facebook.com/profile.php?id=100058599200790" target="_blank" rel="noopener" class="text-gray-400 hover:text-white transition-colors duration-300" aria-label="Facebook">
                            <i class="fab fa-facebook-f fa-lg"></i>
                        </a>
                        <!-- Instagram Icon -->
                        <a href="coming-soon.html" class="text-gray-400 hover:text-white transition-colors duration-300" aria-label="Instagram">
                            <i class="fab fa-instagram fa-lg"></i>
                        </a>
                        <!-- WhatsApp Icon -->
                        <a href="https://api.whatsapp.com/message/UDDWXQWO7GXJC1?autoload=1&app_absent=0" target="_blank" rel="noopener" class="text-gray-400 hover:text-white transition-colors duration-300" aria-label="WhatsApp">
                            <i class="fab fa-whatsapp fa-lg"></i>
                        </a>
                        <!-- TikTok Icon -->
                        <a href="https://www.tiktok.com/@dh.phone2?_t=ZM-8yC4GUv4nyy&_r=1" target="_blank" rel="noopener" class="text-gray-400 hover:text-white transition-colors duration-300" aria-label="TikTok">
                            <svg class="w-5 h-5 md:w-6 md:h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-.88-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
                            </svg>
                        </a>
                    </div>
                </div>
                <!-- Quick Links -->
                <div>
                    <h4 class="text-base md:text-lg font-semibold mb-3 md:mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-sm md:text-base text-gray-300 hover:text-white transition-colors duration-300">Home</a></li>
                        <li><a href="porduct.html" class="text-sm md:text-base text-gray-300 hover:text-white transition-colors duration-300">Products</a></li>
                        <li><a href="Contact.html" class="text-sm md:text-base text-gray-300 hover:text-white transition-colors duration-300">Contact</a></li>
                    </ul>
                </div>
                <!-- Contact Info -->
                <div>
                    <h4 class="text-base md:text-lg font-semibold mb-3 md:mb-4">Contact Info</h4>
                    <div class="space-y-2 text-sm md:text-base text-gray-300">
                        <p>📞 0559364881</p>
                        <p>📍 <a href="https://www.google.com/maps/place/DH+phone/@35.531125,-0.190004,144m/data=!3m1!1e3!4m6!3m5!1s0xd7e3d9d8913e5e9:0x463fa5ab4ea63ab3!8m2!3d35.5311248!4d-0.1900038!16s%2Fg%2F11tnyjcw86?hl=en&entry=ttu&g_ep=EgoyMDI1MDcyMy4wIKXMDSoASAFQAw%3D%3D" target="_blank" rel="noopener">Our Location</a></p>
                    </div>
                </div>
            </div>
            <!-- Bottom Bar -->
            <div class="border-t border-gray-800 mt-6 md:mt-8 pt-6 md:pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <p class="text-xs md:text-sm text-gray-400 text-center md:text-left">
                        © 2025 DH Phone. All rights reserved.
                    </p>
                    <div class="flex items-center space-x-2 mt-3 md:mt-0">
                        <span class="text-xs md:text-sm text-gray-400">Made with</span>
                        <svg class="w-3 h-3 md:w-4 md:h-4 text-red-500" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                        <span class="text-xs md:text-sm text-gray-400">by <a href="https://www.instagram.com/tayabe_doom_?igsh=c29raG8xMXA1cHV5" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300 transition-colors duration-300">tayabedoom</a></span>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        const themeToggleMobile = document.getElementById('theme-toggle-mobile');
        const html = document.documentElement;
        function toggleTheme() {
            html.classList.toggle('dark');
            localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
        }
        themeToggle.addEventListener('click', toggleTheme);
        themeToggleMobile.addEventListener('click', toggleTheme);
        // Check for saved theme preference
        if (localStorage.getItem('theme') === 'dark') {
            html.classList.add('dark');
        }
        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        // Language dropdown functionality
        const languageToggle = document.getElementById('language-toggle');
        const languageDropdown = document.getElementById('language-dropdown');
        const languageToggleMobile = document.getElementById('language-toggle-mobile');
        const languageDropdownMobile = document.getElementById('language-dropdown-mobile');
        languageToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            languageDropdown.classList.toggle('hidden');
            languageDropdownMobile.classList.add('hidden');
        });
        languageToggleMobile.addEventListener('click', (e) => {
            e.stopPropagation();
            languageDropdownMobile.classList.toggle('hidden');
            languageDropdown.classList.add('hidden');
        });
        // Language selection - Fixed and enhanced
        document.querySelectorAll('.lang-option').forEach(button => {
            button.addEventListener('click', (e) => {
                const selectedLang = e.target.getAttribute('data-lang');
                // Update language display on toggle buttons
                const langCode = selectedLang.toUpperCase();
                document.querySelectorAll('#language-toggle span, #language-toggle-mobile span').forEach(span => {
                    span.textContent = langCode;
                });
                // Update HTML attributes
                document.documentElement.lang = selectedLang;
                // Apply RTL or LTR direction
                if (selectedLang === 'ar') {
                    document.documentElement.setAttribute('dir', 'rtl');
                    document.body.classList.add('rtl');
                    document.body.classList.remove('ltr');
                } else {
                    document.documentElement.setAttribute('dir', 'ltr');
                    document.body.classList.add('ltr');
                    document.body.classList.remove('rtl');
                }
                // Update all text elements with data-* attributes
                document.querySelectorAll('[data-en], [data-fr], [data-ar]').forEach(element => {
                    const text = element.getAttribute(`data-${selectedLang}`);
                    if (text) {
                        // Check if the element contains other elements to avoid overwriting them
                        if (element.children.length === 0) {
                            element.textContent = text;
                        } else {
                            // For elements with children, update only direct text nodes
                            // This is a simple approach and might need refinement for complex nested structures
                            element.childNodes.forEach(node => {
                                if (node.nodeType === Node.TEXT_NODE) {
                                    // We cannot easily map text nodes back to their original data attributes
                                    // A better approach would be to re-render the entire content or use a templating system
                                    // For now, we'll leave complex elements with children unchanged for text content
                                    // and only update simple elements.
                                    // Since the navigation links are simple, this should work for them.
                                }
                            });
                            // As a workaround for elements we know are simple but have pseudo-elements or icons,
                            // we can directly set innerHTML if we are sure the content is safe.
                            // This is a compromise for the current structure.
                            if (element.dataset.en && element.dataset.fr && element.dataset.ar) {
                                 // Only update if it has the data attributes (likely a text element)
                                 // and doesn't have many children (likely a simple text element)
                                 if (element.children.length < 3) { // Adjust threshold as needed
                                     element.innerHTML = text; 
                                 }
                            }
                        }
                    }
                });
                // Close dropdowns
                languageDropdown.classList.add('hidden');
                languageDropdownMobile.classList.add('hidden');
            });
        });
        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('#language-toggle') && !e.target.closest('#language-dropdown')) {
                languageDropdown.classList.add('hidden');
            }
            if (!e.target.closest('#language-toggle-mobile') && !e.target.closest('#language-dropdown-mobile')) {
                languageDropdownMobile.classList.add('hidden');
            }
        });
        // Add staggered animation to product cards
        document.addEventListener('DOMContentLoaded', function() {
            const productCards = document.querySelectorAll('.animate-slide-up');
            productCards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
            });
        });
        // Shopify API Integration
        document.addEventListener('DOMContentLoaded', function() {
            const productList = document.getElementById('product-list');
            const searchInput = document.getElementById('search-input');
            
            // Check if elements exist
            console.log('Product list container:', productList);
            console.log('Search input:', searchInput);
            
            if (!productList) {
                console.error('Product list container not found!');
                return;
            }
            
            // Get landing page parameter from URL
            const urlParams = new URLSearchParams(window.location.search);
            const landingPageSlug = urlParams.get('page');
            
            // Shopify Storefront API configuration
            const shopDomain = 'kwr3tv-ax.myshopify.com';
            const accessToken = 'e318cfe2b56703f779f113ed17e8459c';
            let allProducts = [];
            let filteredProducts = [];
            let currentLandingPage = null;
            let db = null;

            console.log('Landing page loaded with URL params:', window.location.search);
            console.log('Landing page slug:', landingPageSlug);

            // Initialize Firebase
            async function initializeFirebase() {
                try {
                    if (window.config && window.config.firebase) {
                        const { initializeApp } = await import('https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js');
                        const { getFirestore, collection, query, where, getDocs } = await import('https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js');
                        
                        const app = initializeApp(window.config.firebase);
                        db = getFirestore(app);
                        
                        // Make Firebase functions available globally
                        window.db = db;
                        window.collection = collection;
                        window.query = query;
                        window.where = where;
                        window.getDocs = getDocs;
                        
                        console.log('Firebase initialized for landing page');
                        return true;
                    }
                } catch (error) {
                    console.log('Firebase not available or has permission issues:', error);
                }
                return false;
            }

            // Debug function to check current state
            function debugLandingPageState() {
                console.log('=== DEBUG LANDING PAGE STATE ===');
                console.log('Current URL:', window.location.href);
                console.log('Landing page slug:', landingPageSlug);
                console.log('Current landing page config:', currentLandingPage);
                console.log('SessionStorage test landing page:', sessionStorage.getItem('testLandingPage'));
                console.log('All products count:', allProducts.length);
                console.log('Filtered products count:', filteredProducts.length);
                console.log('Product list children count:', productList.children.length);
                console.log('================================');
            }

            // Debug function to check sessionStorage
            function debugSessionStorage() {
                console.log('=== DEBUG SESSION STORAGE ===');
                const testLandingPage = sessionStorage.getItem('testLandingPage');
                console.log('Raw sessionStorage testLandingPage:', testLandingPage);
                if (testLandingPage) {
                    try {
                        const parsed = JSON.parse(testLandingPage);
                        console.log('Parsed test landing page:', parsed);
                        console.log('Selected products:', parsed.products);
                    } catch (error) {
                        console.error('Error parsing sessionStorage:', error);
                    }
                }
                console.log('================================');
            }

            // Load landing page configuration from Firebase
            async function loadLandingPageConfig() {
                if (!landingPageSlug) {
                    console.log('No landing page specified, using default');
                    return null;
                }

                // Check sessionStorage first for test landing page
                if (landingPageSlug === 'test-selected-products') {
                    debugSessionStorage(); // Debug sessionStorage
                    try {
                        const testLandingPage = sessionStorage.getItem('testLandingPage');
                        if (testLandingPage) {
                            const landingPage = JSON.parse(testLandingPage);
                            currentLandingPage = landingPage;
                            console.log('Loaded test landing page from sessionStorage:', currentLandingPage);
                            return currentLandingPage;
                        }
                    } catch (error) {
                        console.error('Error loading test landing page from sessionStorage:', error);
                    }
                }

                // Try Firebase for other landing pages (only if Firebase is working)
                if (db) {
                    try {
                        const landingPagesRef = window.collection(window.db, 'landingPages');
                        const q = window.query(landingPagesRef, window.where('slug', '==', landingPageSlug));
                        const querySnapshot = await window.getDocs(q);
                        
                        if (!querySnapshot.empty) {
                            const landingPageDoc = querySnapshot.docs[0];
                            currentLandingPage = {
                                id: landingPageDoc.id,
                                ...landingPageDoc.data()
                            };
                            console.log('Loaded landing page from Firebase:', currentLandingPage);
                            return currentLandingPage;
                        }
                    } catch (error) {
                        console.log('Firebase not working, skipping Firebase lookup:', error.message);
                    }
                }

                console.log('Landing page not found:', landingPageSlug);
                return null;
            }

            // GraphQL query to fetch specific products by handles
            function buildProductsQuery(productHandles) {
                if (!productHandles || productHandles.length === 0) {
                    return null;
                }

                console.log('Building query for product handles:', productHandles);
                
                // Use a simpler approach - get all products and filter in JavaScript
                // This is more reliable than complex GraphQL filtering
                const query = `
                    query {
                        products(first: 100) {
                            edges {
                                node {
                                    id
                                    title
                                    handle
                                    description
                                    productType
                                    tags
                                    availableForSale
                                    priceRange {
                                        minVariantPrice {
                                            amount
                                            currencyCode
                                        }
                                    }
                                    images(first: 1) {
                                        edges {
                                            node {
                                                url
                                                altText
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                `;
                
                console.log('Generated query (will filter in JavaScript):', query);
                return { query, productHandles };
            }
            
            // Default query for all products
            const defaultQuery = `
                query {
                    products(first: 100) {
                        edges {
                            node {
                                id
                                title
                                handle
                                description
                                productType
                                tags
                                availableForSale
                                priceRange {
                                    minVariantPrice {
                                        amount
                                        currencyCode
                                    }
                                }
                                images(first: 1) {
                                    edges {
                                        node {
                                            url
                                            altText
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            `;

            // Fetch products from Shopify
            async function fetchProducts() {
                console.log('Fetching products...');
                
                // Try to initialize Firebase, but don't fail if it doesn't work
                try {
                    await initializeFirebase();
                } catch (error) {
                    console.log('Firebase initialization failed, continuing without Firebase:', error.message);
                }
                
                // Load landing page config first
                const landingConfig = await loadLandingPageConfig();
                
                // Debug the current state
                debugLandingPageState();
                
                let query = defaultQuery;
                let queryDescription = 'all products';
                let selectedProductHandles = []; // New variable to store handles for filtered products

                // If we have a specific landing page with products, use those
                if (landingConfig && landingConfig.products && landingConfig.products.length > 0) {
                    console.log('Found landing page config with products:', landingConfig.products);
                    const queryResult = buildProductsQuery(landingConfig.products);
                    if (queryResult) {
                        query = queryResult.query;
                        selectedProductHandles = queryResult.productHandles;
                        queryDescription = `filtered products for landing page: ${landingConfig.name}`;
                        console.log('Using filtered products query for:', landingConfig.name);
                        console.log('Selected product handles:', selectedProductHandles);
                    } else {
                        console.log('Failed to build specific query, using default');
                    }
                    
                    // Update page title if landing page has a name
                    if (landingConfig.name) {
                        document.title = `${landingConfig.name} | DH Phone`;
                        const pageTitle = document.querySelector('h1');
                        if (pageTitle) {
                            pageTitle.textContent = landingConfig.name;
                        }
                    }
                } else {
                    console.log('No landing page config found or no products selected, using default query');
                }

                console.log('Using query:', queryDescription);
                console.log('Query:', query);
                
                try {
                    const response = await fetch(`https://${shopDomain}/api/2024-01/graphql.json`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Shopify-Storefront-Access-Token': accessToken
                        },
                        body: JSON.stringify({ query })
                    });

                    const data = await response.json();
                    console.log('Products API response:', data);
                    
                    if (data.errors) {
                        console.error('Shopify API errors:', data.errors);
                        data.errors.forEach((error, index) => {
                            console.error(`Error ${index + 1}:`, error.message);
                        });
                        
                        // If specific products query failed, try fallback
                        if (landingConfig && landingConfig.products && landingConfig.products.length > 0) {
                            console.log('Specific products query failed, trying fallback...');
                            return await fetchProductsWithFallback();
                        }
                        
                        productList.innerHTML = '<p class="text-center text-red-500 col-span-full">Failed to load products due to API errors. Please check the console for details.</p>';
                        return;
                    }
                    
                    if (data.data) {
                        // Extract product data from the response
                        let productData;
                        if (data.data.products && data.data.products.edges) {
                            // Standard products query response
                            productData = data.data.products.edges.map(edge => edge.node);
                        } else {
                            // Individual product queries response
                            productData = Object.values(data.data).filter(
                                (value) => value && value.id && value.title && value.handle
                            );
                        }
                        
                        allProducts = productData;
                        console.log('Loaded products:', allProducts);
                        console.log('Number of products found:', allProducts.length);
                        
                        if (allProducts.length === 0) {
                            console.log('No products found, trying fallback query...');
                            return await fetchProductsWithFallback();
                        }
                        
                        // Filter products based on selected handles if available
                        if (selectedProductHandles && selectedProductHandles.length > 0) {
                            filteredProducts = allProducts.filter(product => 
                                selectedProductHandles.includes(product.handle)
                            );
                            console.log('Filtered products based on handles:', filteredProducts);
                            console.log('Selected handles:', selectedProductHandles);
                            console.log('Available product handles:', allProducts.map(p => p.handle));
                        } else {
                            filteredProducts = [...allProducts]; // Use all products if no handles are selected
                            console.log('Using all products as no specific handles were selected.');
                        }
                        
                        console.log('About to render products. filteredProducts:', filteredProducts);
                        console.log('Product list container before rendering:', productList);
                        renderProducts(filteredProducts);
                        console.log('Product list container after rendering:', productList);
                        console.log('Number of children in product list after rendering:', productList.children.length);
                        
                        // Check if products are still there after a short delay
                        setTimeout(() => {
                            console.log('Checking products after 1 second...');
                            console.log('Product list children count after delay:', productList.children.length);
                            console.log('Product list innerHTML after delay:', productList.innerHTML);
                        }, 1000);
                    } else {
                        console.error('Error fetching products:', data);
                        productList.innerHTML = '<p class="text-center text-red-500 col-span-full">Failed to load products. Please try again later.</p>';
                    }
                } catch (error) {
                    console.error('Error:', error);
                    productList.innerHTML = '<p class="text-center text-red-500 col-span-full">Failed to load products. Please check your connection.</p>';
                }
            }

            // Fallback function to fetch all products
            async function fetchProductsWithFallback() {
                console.log('Trying fallback query to get all products...');
                
                try {
                    const response = await fetch(`https://${shopDomain}/api/2024-01/graphql.json`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-Shopify-Storefront-Access-Token': accessToken
                            },
                        body: JSON.stringify({ query: defaultQuery })
                    });
                    
                    const data = await response.json();
                    console.log('Fallback API response:', data);
                    
                    if (data.data && data.data.products) {
                        allProducts = data.data.products.edges.map(edge => edge.node);
                                console.log('Loaded all products as fallback:', allProducts);
                                console.log('Number of fallback products found:', allProducts.length);
                                
                                if (allProducts.length === 0) {
                                    productList.innerHTML = '<p class="text-center text-red-500 col-span-full text-xl py-12">No products found in your Shopify store. Please add some products first.</p>';
                                    return;
                                }
                                
                        // Show warning that no specific products were found
                        if (currentLandingPage) {
                            productList.innerHTML = '<p class="text-center text-yellow-500 col-span-full text-xl py-8">⚠️ No products found for this landing page. Showing all products instead.</p>';
                        }
                                
                                filteredProducts = [...allProducts];
                                renderProducts(filteredProducts);
                            } else {
                                productList.innerHTML = '<p class="text-center text-red-500 col-span-full text-xl py-12">Failed to load products from Shopify store.</p>';
                            }
                } catch (error) {
                            console.error('Fallback query error:', error);
                            productList.innerHTML = '<p class="text-center text-red-500 col-span-full text-xl py-12">Failed to load products. Please check your Shopify connection.</p>';
                }
            }
            // Render products to the page
            function renderProducts(products) {
                console.log('renderProducts called with:', products);
                console.log('Number of products to render:', products.length);
                console.log('Product list container at start:', productList);
                console.log('Product list innerHTML at start:', productList.innerHTML);
                
                // Clear the container
                productList.innerHTML = '';
                console.log('Product list innerHTML after clearing:', productList.innerHTML);
                
                if (products.length === 0) {
                    console.log('No products to render, showing empty message');
                    productList.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400 col-span-full text-xl py-12">No products found matching your criteria.</p>';
                    return;
                }
                
                console.log('Rendering products...');
                let cardsAdded = 0;
                
                products.forEach((product, index) => {
                    console.log(`Rendering product ${index + 1}:`, product.title);
                    const price = product.priceRange.minVariantPrice.amount;
                    const currency = product.priceRange.minVariantPrice.currencyCode;
                    const image = product.images.edges[0]?.node || { url: '', altText: 'Product image' };
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card bg-white dark:bg-slate-800 rounded-xl overflow-hidden shadow-lg animate-slide-up';
                    productCard.style.animationDelay = `${index * 0.1}s`;
                    productCard.innerHTML = `
                        <div class="h-40 md:h-48 flex items-center justify-center overflow-hidden product-image">
                            ${image.url ? 
                                `<img src="${image.url}" alt="${image.altText || product.title}" class="w-full h-full object-cover">` : 
                                `<div class="bg-gradient-to-r from-blue-500 to-blue-600 w-full h-full flex items-center justify-center">
                                    <i class="fas fa-mobile-alt text-white text-4xl md:text-6xl"></i>
                                </div>`
                            }
                        </div>
                        <div class="p-4 md:p-6">
                            <h3 class="text-lg md:text-xl font-bold mb-2">${product.title}</h3>
                            <p class="text-gray-600 dark:text-gray-400 mb-3 md:mb-4 text-xs md:text-sm">${product.description.substring(0, 80)}${product.description.length > 80 ? '...' : ''}</p>
                            <div class="flex justify-between items-center mt-4 md:mt-6">
                                <span class="price-tag text-sm md:text-base">${currency} ${price}</span>
                                <button class="px-3 py-2 md:px-4 md:py-2 bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-lg hover:from-primary-700 hover:to-primary-800 transition btn-primary text-xs md:text-sm font-medium order-now-btn" data-handle="${product.handle}">
                                    Order Now
                                </button>
                            </div>
                        </div>
                    `;
                    productList.appendChild(productCard);
                    cardsAdded++;
                    console.log(`Added product card ${cardsAdded} for:`, product.title);
                });
                
                console.log('Finished rendering products. Total cards added:', cardsAdded);
                console.log('Product list children count:', productList.children.length);
                console.log('Product list innerHTML after rendering:', productList.innerHTML);
                
                // Add event listeners to Order Now buttons
                document.querySelectorAll('.order-now-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const handle = this.getAttribute('data-handle');
                        window.location.href = `product-in.html?product=${handle}`;
                    });
                });
            }
            // Search functionality
            searchInput.addEventListener('input', function() {
                applyFiltersAndSearch();
            });
            // Filter functionality
            function applyFiltersAndSearch() {
                const searchTerm = searchInput.value.toLowerCase();
                // Filter products by search term only
                filteredProducts = allProducts.filter(product => {
                    return product.title.toLowerCase().includes(searchTerm) || 
                           product.description.toLowerCase().includes(searchTerm) ||
                           product.productType.toLowerCase().includes(searchTerm);
                });
                renderProducts(filteredProducts);
            }
            // Initial fetch
            fetchProducts();
        });
    </script>
</body>
</html>